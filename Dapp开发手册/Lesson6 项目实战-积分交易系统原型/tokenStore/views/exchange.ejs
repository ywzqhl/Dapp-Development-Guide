


<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>积分管理系统</title>
		<link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css">
		<link rel="stylesheet" type="text/css" href="/stylesheets/main.css">
	</head>
	<body>
	<div class="navall">
		<div class="logo">
			<h1>个人积分交易</h1>
		</div>
		<div class="navbar">
			<ul class="nav nav-pills">
			    <li role="presentation" ><a href="/index">积分兑换</a></li>
			    <li role="presentation"><a href="/trans">积分赠送</a></li>
				<li role="presentation" class="active"><a href="/exchange">异业互兑</a></li>
				<li role="presentation"><a href="/blockchain">区块链浏览器</a></li>
			</ul>
		</div>
	</div>
		<div class="person" >
		      <img height="180" src="/images/avtar.jpg" width="180" class="img-rounded person-img">
		      <div>
		      	<h4>&nbsp;个人账户:</h4>
				<ul class="person-info">
				  <li>范若海</li>
				  <li>frank</li>
				  <li>18211139878</li>
				  <li aria-label="Home location" class="vcard-detail pt-1 css-truncate css-truncate-target" itemprop="homeLocation" title="
				    Beijing"><svg aria-hidden="true" class="octicon octicon-location" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M6 0C2.69 0 0 2.5 0 5.5 0 10.02 6 16 6 16s6-5.98 6-10.5C12 2.5 9.31 0 6 0zm0 14.55C4.14 12.52 1 8.44 1 5.5 1 3.02 3.25 1 6 1c1.34 0 2.61.48 3.56 1.36.92.86 1.44 1.97 1.44 3.14 0 2.94-3.14 7.02-5 9.05zM8 5.5c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"></path></svg> Beijing</li>
				    <li><a href="mailto:1543818294@qq.com">1543818294@qq.com</a></li>
				    <li>
					    <span style="color: #3385ff" id="a"><%-aBalance%></span><span style="color: blue">&nbsp;积分A</span><br>
					    <span style="color: #3385ff" id="b"><%-bBalance%></span><span style="color: blue">&nbsp;积分B</span><br>
					    <span style="color: #3385ff" id="c"><%-cBalance%></span><span style="color: blue">&nbsp;积分C</span><br>
				    </li>
				</ul>
	    	  </div>
		</div>
		<div class="comsume">
			<div id="main" style="width:600px;height:400px;margin-left: 50px;margin-top: 10px;float: left;"></div>
			<div class="exchange col-sm-4">
				<ul class="list-group">
				  <li class="list-group-item list-group-item-success"><strong>当前积分价格（模拟）:</strong></li>
				  <li class="list-group-item list-group-item-info">积分A  <strong><span id="aa">0.08</span></strong>元/A</li>
				  <li class="list-group-item list-group-item-warning">积分B <strong><span id="bb">0.05</span></strong>元/B</li>
				  <li class="list-group-item list-group-item-danger">积分C <strong><span id="cc">0.06</span></strong>元/C</li>
				</ul>
			</div>
			<div class="col-sm-4" style="margin-left: 30px;">
				<ul class="list-group">
				  <li class="list-group-item list-group-item-success">
				  <input type="text"  id="number1" placeholder="输入兑换数量" style="width: 240px">&nbsp;&nbsp;
				   	<select class="s1">
				  		<option selected="selected">积分A</option>
				  		<option>积分B</option>
				  		<option>积分C</option>
				  	</select>
				  </li>
				  <li class="list-group-item list-group-item-info">
				  	<input type="text"   v-model="message" id="number2" placeholder="可兑换到的数量" style="width: 240px">&nbsp;&nbsp;
				  	<select class="s2">
				  		<option >积分A</option>
				  		<option selected="selected">积分B</option>
				  		<option>积分C</option>
				  	</select>
				  </li>
				  <li class="list-group-item list-group-item-danger"><button class="btn btn-info form-control ex">兑换</button></li>
				</ul>
			</div>
		</div>
	<footer class="footer">
        <div>
          <img src="http://www.sageledger.com/wp-content/uploads/2016/12/0.5.jpg" style="margin-top: 20px;float:left;">
          <ul class="list-inline" style="float:left; margin-top:40px;margin-left:300px">
            <li><a href="http://www.sageledger.com/" target="_blank">联系我们</a></li><li>赛智区块链（北京）技术有限公司 提供技术支持</li>
          </ul>
        </div>
      </div>
    </footer>
	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
	<script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
	<script src="bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/javascripts/main.js"></script>
	<script type="text/javascript" src="/javascripts/echarts.min.js"></script>
	<script type="text/javascript" src="/javascripts/lines.js"></script>
	<script type="text/javascript">
		$(".ex").click(function(){
			var s1 = $(".s1 option:selected").text()[2];
			var s2 = $(".s2 option:selected").text()[2];
			var rateA = $("#aa").text()*100;
			var rateB = $("#bb").text()*100;
			var rateC = $("#cc").text()*100;
			var n1 = parseInt($("#number1").val());
			console.log(s1,s2,rateA,rateB,rateC,n1);
			var n2 ;
			switch(s1){
				case "A":
					switch(s2){
						case "A":
							alert("相同积分无需兑换");
							break;
						case "B":
							n2 = n1*rateA/rateB;
							break;
						case "C":
							n2 = n1*rateA/rateC;
							break;
						default:
							break;
					}
					break;
				case "B":
					switch(s2){
							case "A":
								n2 = n1*rateB/rateA;
								break;
							case "B":
								alert("相同积分无需兑换");
								break;
							case "C":
								n2 = n1*rateB/rateC;
								break;
							default:
								break;
					}
					break;
				case "C":
					switch(s2){

							case "A":
								n2 = n1*rateC/rateA;
								break;
							case "B":
								n2 = n1*rateC/rateB;
								break;
							case "C":
								alert("相同积分无需兑换");
								break;
							default:
								break;
					}
					break;
				default:
					break;
	    		}
	    		n2 = parseInt(n2);
	    		var message = n2+" "+s2;
	    		$('#number2').val(message);
			$.post("/ex",{s1:s1,s2:s2,rateA:rateA,rateB:rateB,rateC:rateC,n1:n1,n2:n2},function(result){
				console.log(result);
			});
		});
	</script>
	</body>
</html>